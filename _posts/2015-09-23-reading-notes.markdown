---
layout: post
title:  "Reading notes"
date:   2015-09-23 20:11:33
categories: jekyll update
---

这些时间在读《松本行弘的程序世界》，看到里面有关于字符串，编码和正则式等，有挺多是之前不知道的。

#sort 与 sort_by 区别

{% highlight ruby %}
ary.sort{|a,b|
  a.to_i <=> b.to_i
}
{% endhighlight %}

`sort` 每次都会执行块处理，如上面的代码，每次比较都要进行整数转换，比较浪费资源，而且不是线性增长的。

`sort_by` 用执行块的代码所生成的结果进行排序，对每个元素只执行一次块的调用。

{% highlight ruby %}
ary.sort_by{|x| x.to_i}
{% endhighlight %}

#Enumerable
迭代器可以分为`外部迭代器`和`内部迭代器`，  
Ruby 的方法定义简单且容易理解，但不能从多个对象逐个取出元素来处理（要把所有对象变成一个数组后才能）。  
并且循环不能并行处理。  

#Encoding
Unicode 5.0 已经收入9万多字，已经超出了65536的范围。  
UTF-8作为可变长的，与ASCII具有兼容性的字符编码方式。将 ASCII字符串当做UTF-8字符串来处理也不会有问题。  

几乎多有情况下，文本数据都不附带文字编码方式的信息，所以容易引起错误。  
使用 UCS 方式的编程语言会在输入输出是对文本统一处理，Java 的内部编码为 UTF-16，Perl为UTF-8。  
Ruby 使用 CSI，不会对文本做任何处理，成为少有的例外。  



#Regex
后面跟一个`?`就会进行懒惰匹配（第一次与模式匹配时就停止检索）。  
`(.)\1`是指匹配两个相同的字符，在后面使用匹配的字符串称为向后引用。  
`|`与其他正则表达式元素比，优先级要低，`yes|no`会解释为`yes`或者`no`（不同于`ye(s|n)o`的匹配结果）。  
